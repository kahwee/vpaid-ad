!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){var n=i(1);window.getVPAIDAd=function(){return new n}},function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=i(2),d=i(3),l=i(4),c=i(6);function h(){this._destroyed=!0,this._videoSlot.src="",this._slot.innerHTML="",this._ui=null}var f=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=r(this,a(t).call(this))).baseUrl="",e.emitVpaidMethodInvocations(),e._ui={},e.quartileIndexEmitted=-1,e.hasEngaged=!1,e._attributes={companions:"",desiredBitrate:256,duration:30,remainingTime:-1,expanded:!1,icons:!1,linear:!0,adSkippableState:!1,viewMode:"normal",width:0,height:0,volume:1},e.previousAttributes=Object.assign({},e._attributes),e.opts=i,e.opts.videos=e.opts.videos||[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s),function(e,t,i){t&&o(e.prototype,t),i&&o(e,i)}(t,[{key:"set",value:function(e,t){this.previousAttributes[e]=this._attributes[e],this._attributes[e]=t}},{key:"handshakeVersion",value:function(e){return"2.0"}},{key:"appendStylesheet",value:function(e){var t=document.getElementsByTagName("head")[0],i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=this.baseUrl+e,i.media="all",t.appendChild(i)}},{key:"initAd",value:function(e,t,i,n,o,r){var a=this;this._attributes.width=e,this._attributes.height=t,this._attributes.viewMode=i,this._attributes.desiredBitrate=n,this._slot=r.slot||this.emit("AdError","Video slot is invalid"),this._videoSlot=r.videoSlot||this.emit("AdError","Slot is invalid"),this.useBestVideo().then(function(){a.emit("AdLoaded")}).catch(function(e){a.emit("AdLog",e),a.emit("AdLoaded")}),this.videoTracker=new l(this._videoSlot,this)}},{key:"useBestVideo",value:function(){var e=this;return new Promise(function(t,i){var n=e.opts.videos.filter(function(e){return c(e.type)});n[0]?e.setVideoSource(n[0].url,n[0].type).then(t).catch(i):i(new Error("no supported video found"))})}},{key:"setVideoSource",value:function(e,t){var i=this;return new Promise(function(n,o){void 0===i._videoSlot.onloadeddata?n():i._videoSlot.onloadeddata=n,i._videoSlot.onerror=function(i){var n;switch(i.target.error.code){case i.target.error.MEDIA_ERR_ABORTED:n="You aborted the video playback.";break;case i.target.error.MEDIA_ERR_NETWORK:n="A network error caused the video download to fail part-way.";break;case i.target.error.MEDIA_ERR_DECODE:n="The video playback was aborted due to a corruption problem or because the video used features your browser did not support.";break;case i.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:n="The video could not be loaded, either because the server or network failed or because the format is not supported.";break;default:n="An unknown error occurred."}o(new Error("".concat(n," Type: ").concat(t,", source: ").concat(e)))},i._videoSlot.src=e,i._videoSlot.type=t})}},{key:"startAd",value:function(){var e=this;void 0===this._videoSlot.onloadeddata?this.emit("AdStarted"):this._videoSlot.onloadeddata=function(){e.emit("AdStarted")},this._videoSlot.load()}},{key:"stopAd",value:function(){this._destroyed||(h.call(this),this.emit("AdStopped"))}},{key:"skipAd",value:function(){if(!this._destroyed){if(!this._attributes.adSkippableState)return!1;h.call(this),this.emit("AdSkipped"),this.emit("AdStopped")}}},{key:"resizeAd",value:function(e,t,i){this._attributes.width=e,this._attributes.height=t,this._attributes.viewMode=i,this.emit("AdSizeChange")}},{key:"pauseAd",value:function(){this._videoSlot.pause(),this.emit("AdPaused")}},{key:"clickThru",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.emit("AdClickThru",e.url,e.id,e.playerHandles)}},{key:"resumeAd",value:function(){this._videoSlot.play(),this.emit("AdPlaying")}},{key:"expandAd",value:function(){this.hasEngaged=!0,this.set("expanded",!0),this.emit("AdExpandedChange")}},{key:"collapseAd",value:function(){this.set("expanded",!1),this.emit("AdExpandedChange")}},{key:"subscribe",value:function(e,t,i){this.on(t,e,i)}},{key:"unsubscribe",value:function(e,t){this.off(t,e)}},{key:"getAdLinear",value:function(){return this._attributes.linear}},{key:"getAdWidth",value:function(){return this._attributes.width}},{key:"getAdHeight",value:function(){return this._attributes.height}},{key:"getAdExpanded",value:function(){return this._attributes.expanded}},{key:"getAdSkippableState",value:function(){return this._attributes.adSkippableState}},{key:"getAdRemainingTime",value:function(){return this.hasEngaged?-2:this._videoSlot.duration-this._videoSlot.currentTime}},{key:"getAdDuration",value:function(){return this.hasEngaged?-2:this._videoSlot.duration}},{key:"getAdVolume",value:function(){return this._attributes.volume}},{key:"getAdCompanions",value:function(){return this._attributes.companions}},{key:"getAdIcons",value:function(){return this._attributes.icons}},{key:"setAdVolume",value:function(e){if(this._attributes.volume!==e){if(e<0||e>1)return this.emit("AdError","volume is not valid");this.set("volume",e),this._videoSlot.volume=e,this._videoSlot.muted=!e,this.emit("AdVolumeChange")}}},{key:"emitVpaidMethodInvocations",value:function(){var e=this;d.forEach(function(t){var i=e[t];e[t]=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.emit.apply(e,["".concat(t,"()")].concat(o)),i.apply(e,o)}},this)}}]),t}();e.exports=f},function(e,t){function i(){}i.prototype={on:function(e,t,i){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){var n=this;function o(){n.off(e,o),t.apply(i,arguments)}return o._=t,this.on(e,o,i)},emit:function(e){for(var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),n=0,o=i.length;n<o;n++)i[n].fn.apply(i[n].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),n=i[e],o=[];if(n&&t)for(var r=0,a=n.length;r<a;r++)n[r].fn!==t&&n[r].fn._!==t&&o.push(n[r]);return o.length?i[e]=o:delete i[e],this}},e.exports=i},function(e,t){e.exports=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdadSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons","setAdVolume"]},function(e,t,i){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=i(5),r=[{value:0,name:o[0]},{value:.25,name:o[1]},{value:.5,name:o[2]},{value:.75,name:o[3]}];var a=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AdVideo";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.emitter=i,this.prefix=n,this.quartileIndexEmitted=-1,this.addEventListeners()}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(e,[{key:"emit",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=this.prefix+t[0];return this.emitter.emit.apply(this.emitter,[n].concat(t.splice(1)))}},{key:"addEventListeners",value:function(){this.events={handleTimeupdate:function(){var e=this.quartileIndexEmitted+1,t=r[e];t&&this.el.currentTime/this.el.duration>t.value&&(this.quartileIndexEmitted=e,this.emit(t.name))}.bind(this),handleEnded:function(){this.emit(o[4]),this.removeEventListeners()}.bind(this)},this.el.addEventListener("timeupdate",this.events.handleTimeupdate),this.el.addEventListener("ended",this.events.handleEnded)}},{key:"removeEventListeners",value:function(){this.el.removeEventListener("timeupdate",this.events.handleTimeupdate),this.el.removeEventListener("ended",this.events.handleEnded)}}]),e}();e.exports=a},function(e,t){e.exports=["Start","FirstQuartile","Midpoint","ThirdQuartile","Complete"]},function(e,t){var i;e.exports=function(e){return i||(i=document.createElement("video")),!!i.canPlayType(e).replace(/no/,"")}}]);